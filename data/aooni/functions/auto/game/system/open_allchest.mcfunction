# Score Add
# 4F
execute as @a[tag=!chest_4-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_4-1"]} run scoreboard players add @s open_chest-4 1
execute as @a[tag=!chest_4-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_4-2"]} run scoreboard players add @s open_chest-4 1
execute as @a[tag=!chest_4-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_4-3"]} run scoreboard players add @s open_chest-4 1
# 3F
execute as @a[tag=!chest_3-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_3-1"]} run scoreboard players add @s open_chest-3 1
execute as @a[tag=!chest_3-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_3-2"]} run scoreboard players add @s open_chest-3 1
execute as @a[tag=!chest_3-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_3-3"]} run scoreboard players add @s open_chest-3 1
# 2F
execute as @a[tag=!chest_2-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-1"]} run scoreboard players add @s open_chest-2 1
execute as @a[tag=!chest_2-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-2"]} run scoreboard players add @s open_chest-2 1
execute as @a[tag=!chest_2-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-3"]} run scoreboard players add @s open_chest-2 1
execute as @a[tag=!chest_2-4,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-4"]} run scoreboard players add @s open_chest-2 1
# 1F
execute as @a[tag=!chest_1-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-1"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-2"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-3"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-4,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-4"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-5,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-5"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-6,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-6"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-7,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-7"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-8,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-8"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-9,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-9"]} run scoreboard players add @s open_chest-1 1
execute as @a[tag=!chest_1-10,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-10"]} run scoreboard players add @s open_chest-1 1
# B1
execute as @a[tag=!chest_b1-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-1"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-2"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-3"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-4,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-4"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-5,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-5"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-6,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-6"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-7,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-7"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-8,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-8"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-9,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-9"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-10,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-10"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-11,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-11"]} run scoreboard players add @s open_chest-b1 1
execute as @a[tag=!chest_b1-12,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-12"]} run scoreboard players add @s open_chest-b1 1

# Tag Add
# 4F
execute as @a[tag=!chest_4-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_4-1"]} run tag @s add chest_4-1
execute as @a[tag=!chest_4-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_4-2"]} run tag @s add chest_4-2
execute as @a[tag=!chest_4-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_4-3"]} run tag @s add chest_4-3
# 3F
execute as @a[tag=!chest_3-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_3-1"]} run tag @s add chest_3-1
execute as @a[tag=!chest_3-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_3-2"]} run tag @s add chest_3-2
execute as @a[tag=!chest_3-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_3-3"]} run tag @s add chest_3-3
# 2F
execute as @a[tag=!chest_2-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-1"]} run tag @s add chest_2-1
execute as @a[tag=!chest_2-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-2"]} run tag @s add chest_2-2
execute as @a[tag=!chest_2-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-3"]} run tag @s add chest_2-3
execute as @a[tag=!chest_2-4,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_2-4"]} run tag @s add chest_2-4
# 1F
execute as @a[tag=!chest_1-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-1"]} run tag @s add chest_1-1
execute as @a[tag=!chest_1-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-2"]} run tag @s add chest_1-2
execute as @a[tag=!chest_1-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-3"]} run tag @s add chest_1-3
execute as @a[tag=!chest_1-4,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-4"]} run tag @s add chest_1-4
execute as @a[tag=!chest_1-5,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-5"]} run tag @s add chest_1-5
execute as @a[tag=!chest_1-6,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-6"]} run tag @s add chest_1-6
execute as @a[tag=!chest_1-7,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-7"]} run tag @s add chest_1-7
execute as @a[tag=!chest_1-8,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-8"]} run tag @s add chest_1-8
execute as @a[tag=!chest_1-9,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-9"]} run tag @s add chest_1-9
execute as @a[tag=!chest_1-10,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_1-10"]} run tag @s add chest_1-10
# B1
execute as @a[tag=!chest_b1-1,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-1"]} run tag @s add chest_b1-1
execute as @a[tag=!chest_b1-2,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-2"]} run tag @s add chest_b1-2
execute as @a[tag=!chest_b1-3,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-3"]} run tag @s add chest_b1-3
execute as @a[tag=!chest_b1-4,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-4"]} run tag @s add chest_b1-4
execute as @a[tag=!chest_b1-5,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-5"]} run tag @s add chest_b1-5
execute as @a[tag=!chest_b1-6,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-6"]} run tag @s add chest_b1-6
execute as @a[tag=!chest_b1-7,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-7"]} run tag @s add chest_b1-7
execute as @a[tag=!chest_b1-8,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-8"]} run tag @s add chest_b1-8
execute as @a[tag=!chest_b1-9,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-9"]} run tag @s add chest_b1-9
execute as @a[tag=!chest_b1-10,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-10"]} run tag @s add chest_b1-10
execute as @a[tag=!chest_b1-11,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-11"]} run tag @s add chest_b1-11
execute as @a[tag=!chest_b1-12,scores={open_chest=1}] at @s if data entity @e[sort=nearest,limit=1,type=armor_stand] {Tags:["chest_b1-12"]} run tag @s add chest_b1-12

# score reset
scoreboard players set @a open_chest 0

# title
execute as @a at @s run title @s[team=!aooni] actionbar ["",{"text":"\u30c1\u30a7\u30b9\u30c8\u60c5\u5831: B1:"},{"score":{"name":"@s","objective":"open_chest-b1"}},{"text":"/12  1F:"},{"score":{"name":"@s","objective":"open_chest-1"}},{"text":"/10  2F:"},{"score":{"name":"@s","objective":"open_chest-2"}},{"text":"/4  3F:"},{"score":{"name":"@s","objective":"open_chest-3"}},{"text":"/3  4F:"},{"score":{"name":"@s","objective":"open_chest-4"}},{"text":"/3"}]

#Give Keys
execute as @a at @s if score @s open_chest-1 matches 10 if score @s open_chest-2 matches 4 if score @s open_chest-3 matches 3 if score @s open_chest-4 matches 4 if score @s have_b1_key matches 0 run function aooni:auto/game/system/give_b1_keys
execute as @a at @s if score @s open_chest-b1 matches 12 if score @s have_5f_key matches 0 run function aooni:auto/game/system/give_5f_keys